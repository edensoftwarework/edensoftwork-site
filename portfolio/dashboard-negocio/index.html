<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de M√©tricas y An√°lisis - EDEN SoftWork</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../styles.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Tutorial Modal -->
    <div id="tutorial-modal" class="tutorial-modal">
        <div class="tutorial-modal-content">
            <span id="tutorial-close" class="tutorial-close-x">&times;</span>
            <div class="tutorial-intro">
                <h2>Bienvenido al Dashboard de An√°lisis</h2>
                <p><strong><u>Visualiza y analiza el rendimiento de tu negocio con m√©tricas en tiempo real,</u></strong> ideal para tomar decisiones basadas en datos y optimizar operaciones.</p>
            </div>
            <div class="tutorial-slider-container">
                <button class="slider-arrow slider-arrow-left" id="prev-step">‚Äπ</button>
                <div class="tutorial-steps">
                    <div class="step active">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>M√©tricas Clave</h3>
                            <p>Visualiza ingresos totales, cantidad de ventas, clientes √∫nicos, ticket promedio, productos vendidos y margen de ganancia. Todas calculadas en tiempo real desde tus datos.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>Gr√°ficos Interactivos</h3>
                            <p>Analiza tendencias de ventas, rendimiento por categor√≠a, productos m√°s vendidos y distribuci√≥n horaria. Cada gr√°fico se actualiza seg√∫n el per√≠odo seleccionado.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>Filtros Flexibles</h3>
                            <p>Selecciona per√≠odos predefinidos (semana, mes, trimestre, a√±o) o define rangos personalizados. Activa la comparaci√≥n para ver cambios respecto al per√≠odo anterior.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3>Insights Autom√°ticos</h3>
                            <p>El sistema analiza tus datos y genera recomendaciones: detecta picos de ventas, productos estrella, horarios √≥ptimos y oportunidades de mejora.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <h3>Exportaci√≥n Profesional</h3>
                            <p>Genera reportes en PDF con todas las m√©tricas y transacciones. Los datos de esta demo son realistas y se actualizan con cada per√≠odo seleccionado.</p>
                        </div>
                    </div>
                </div>
                <button class="slider-arrow slider-arrow-right" id="next-step">‚Ä∫</button>
            </div>
            <div class="slider-indicators">
                <span class="indicator active" data-step="0"></span>
                <span class="indicator" data-step="1"></span>
                <span class="indicator" data-step="2"></span>
                <span class="indicator" data-step="3"></span>
                <span class="indicator" data-step="4"></span>
            </div>
            <button class="tutorial-close-btn" id="close-tutorial">Comenzar Demo</button>
        </div>
    </div>

    <div class="container">
        <img src="logo_4.png" class="small-logo" alt="EDEN SoftWork Logo">
        <h1>Dashboard de M√©tricas y An√°lisis</h1>
        <p>Monitorea el rendimiento en tiempo real con m√©tricas clave y visualizaciones interactivas</p>

        <!-- Filters Section -->
        <div class="filters-section">
            <h3>Filtros de An√°lisis</h3>
            <div class="filters-container">
                <div class="filter-group">
                    <label for="period-select">Per√≠odo:</label>
                    <select id="period-select">
                        <option value="week">√öltima Semana</option>
                        <option value="month" selected>√öltimo Mes</option>
                        <option value="quarter">√öltimo Trimestre</option>
                        <option value="year">√öltimo A√±o</option>
                        <option value="custom">Personalizado</option>
                    </select>
                </div>
                <div class="filter-group custom-dates" style="display: none;">
                    <label for="start-date">Desde:</label>
                    <input type="date" id="start-date">
                    <label for="end-date">Hasta:</label>
                    <input type="date" id="end-date">
                    <button id="apply-custom">Aplicar</button>
                </div>
                <div class="filter-group">
                    <label for="compare-toggle">
                        <input type="checkbox" id="compare-toggle">
                        Comparar con per√≠odo anterior
                    </label>
                </div>
                <button id="export-pdf-btn" class="export-btn">üìÑ Exportar PDF</button>
                <button id="refresh-btn" class="refresh-btn" data-tooltip="Genera un nuevo conjunto de datos demo">üîÑ Actualizar</button>
            </div>
        </div>

        <!-- Metrics Dashboard -->
        <div class="dashboard-section">
            <h3>M√©tricas Principales</h3>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-icon">üí∞</div>
                    <div class="metric-content">
                        <h4>Ingresos Totales</h4>
                        <p class="metric-value" id="total-revenue">$0</p>
                        <p class="metric-change" id="revenue-change">--</p>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">üìä</div>
                    <div class="metric-content">
                        <h4>Ventas Realizadas</h4>
                        <p class="metric-value" id="total-sales">0</p>
                        <p class="metric-change" id="sales-change">--</p>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">üë•</div>
                    <div class="metric-content">
                        <h4>Clientes Atendidos</h4>
                        <p class="metric-value" id="total-customers">0</p>
                        <p class="metric-change" id="customers-change">--</p>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">‚≠ê</div>
                    <div class="metric-content">
                        <h4>Ticket Promedio</h4>
                        <p class="metric-value" id="avg-ticket">$0</p>
                        <p class="metric-change" id="ticket-change">--</p>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">üì¶</div>
                    <div class="metric-content">
                        <h4>Productos Vendidos</h4>
                        <p class="metric-value" id="products-sold">0</p>
                        <p class="metric-change" id="products-change">--</p>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon">üíπ</div>
                    <div class="metric-content">
                        <h4>Margen Promedio</h4>
                        <p class="metric-value" id="profit-margin">0%</p>
                        <p class="metric-change" id="margin-change">--</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
            <div class="chart-card large">
                <h3>Tendencia de Ventas</h3>
                <canvas id="sales-trend-chart"></canvas>
            </div>
            <div class="chart-card">
                <h3>Ventas por Categor√≠a</h3>
                <canvas id="category-chart"></canvas>
            </div>
            <div class="chart-card">
                <h3>Top 5 Productos</h3>
                <canvas id="top-products-chart"></canvas>
            </div>
            <div class="chart-card large">
                <h3>Comparativa Horaria</h3>
                <canvas id="hourly-chart"></canvas>
            </div>
        </div>

        <!-- Detailed Table -->
        <div class="table-section">
            <h3>√öltimas Transacciones</h3>
            <div class="table-filters">
                <input type="text" id="search-table" placeholder="Buscar por cliente o producto...">
                <select id="status-filter">
                    <option value="">Todos los Estados</option>
                    <option value="completada">Completada</option>
                    <option value="pendiente">Pendiente</option>
                    <option value="cancelada">Cancelada</option>
                </select>
            </div>
            <div class="table-container">
                <table id="transactions-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Fecha/Hora</th>
                            <th>Cliente</th>
                            <th>Productos</th>
                            <th>Total</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody id="transactions-tbody">
                        <!-- Se llenar√° din√°micamente -->
                    </tbody>
                </table>
            </div>
            <div class="table-footer">
                <button id="show-more-btn" class="show-more-btn">Ver Todas las Transacciones</button>
                <span id="showing-count" class="showing-count"></span>
            </div>
        </div>

        <!-- Insights Section -->
        <div class="insights-section">
            <h3>An√°lisis e Insights</h3>
            <div class="insights-grid" id="insights-container">
                <!-- Se llenar√° din√°micamente -->
            </div>
        </div>
    </div>

    <p style="text-align: center; margin-top: 30px;"><a href="../../index.html" style="color: #667eea; text-decoration: none; font-size: 16px;">‚Üê Volver a inicio</a></p>

    <script src="script.js"></script>
</body>
</html>